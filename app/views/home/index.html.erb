<%= render 'reminders' %>

<div class="card horizontal">
    <div class="row">
        <div class="col m5 s12">
            <%= image_tag 'contability', alt: 'contabilidade wallpaper' %>

            <div class="card-action center-align">
                <%= link_to 'Cadastrar nova transação', new_card_path %>
            </div>
        </div>

        <div class="card-stacked col m7 s12">
            <div class="card-content">
                <%= link_to 'Ver Calendário', calendars_path, class: 'btn waves-light waves-effect blue'  %>
                
                <hr />

                <p>Filtre o resultado desejado!</p>

                <%= search_form_for @q do |f| %>
                    <div class="row">
                        <div class="field col m6 s12">
                            <label>De:</label>
                            <%= f.date_field :date_concluded_gteq, class: 'datepicker' %>
                        </div>

                        <div class="field col m6 s12">
                            <label>Até:</label>
                            <%= f.date_field :date_concluded_lteq, class: 'datepicker' %>
                        </div>

                        <div class="field col m6 s12">
                            <label>Tributo:</label>
                            <%= f.select :tribute_eq, Card.tributes.map { |key, value| [key.humanize, value] }, {include_blank: 'Selecione'}, class: "browser-default" %>
                        </div>

                        <div class="field col m6 s12">
                            <%= f.label 'Método de Pagamento' %>
                            <%= f.select :payment_method_eq, Card.payment_methods.map { |key, value| [key.humanize, value] }, {include_blank: 'Selecione'}, class: "browser-default" %>
                        </div>

                        <div class="field col m12">
                            <%= f.label 'Tipo de transação' %>
                            <%= f.select :action_eq, Card.actions.map { |key, value| [key.humanize, value] }, {include_blank: 'Selecione'}, class: "browser-default" %>
                        </div>
                        
                        <% if current_user.admin? %>
                            <div class="field col m12">
                                <label>
                                    <%= check_box_tag :only_particular_cards %>
                                    <span>Filtrar somente notas particulares</span>
                                </label>
                            </div>
                        <% end %>

                        <div class="field col m6 s12">
                            <label>
                                <%= f.check_box :receipt_true, include_hidden: false %>
                                <span>Recibo emitido</span>
                            </label>
                        </div>

                        <div class="field col m6 s12">
                            <label>
                                <%= f.check_box :invoice_true, include_hidden: false %>
                                <span>Nota Fiscal emitida</span>
                            </label>
                        </div>

                        <div class="field col m12">
                            <label>
                                <%= f.check_box :go_to_contability_true, include_hidden: false %>
                                <span>Filtrar somente notas para contabilidade</span>
                            </label>
                        </div>

                        <div class="alert center-align"><%= alert %></div>

                        <div class="actions center-align">
                            <%= f.submit 'Tirar Relatório', class: 'btn waves-effect waves-light m-top black right col s12 offset-md-1 m5', :format => :pdf %>
                            <%= link_to 'Limpar', root_path, class: 'btn waves-effect waves-light m-top left col s12 m4' %>
                        </div>
                    </div>
                <% end %>

                <div class="field center-allign">
                    <small>
                        No relatório, só serão listados os gastos e recebimentos <b>concluídos</b> no calendário, 
                        listando no relatório PDF somente os pagamentos/recebimentos <b>realizados</b> 
                        e que já cairam na conta do consultório!
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>